-- 초기 더미 데이터 (테스트 및 개발용)

-- 사용자 (10명: 일반 8명, 관리자 2명)
INSERT INTO users (username, point_balance, role) VALUES
('user001', 50000.00, 'CUSTOMER'),
('user002', 30000.00, 'CUSTOMER'),
('user003', 100000.00, 'CUSTOMER'),
('user004', 20000.00, 'CUSTOMER'),
('user005', 75000.00, 'CUSTOMER'),
('user006', 15000.00, 'CUSTOMER'),
('user007', 60000.00, 'CUSTOMER'),
('user008', 40000.00, 'CUSTOMER'),
('admin001', 0.00, 'ADMIN'),
('admin002', 0.00, 'ADMIN');

-- 상품 (20개, 다양한 카테고리)
INSERT INTO products (product_name, category, description, price, is_exposed) VALUES
('노트북 A', '전자제품', '고성능 노트북', 1500000.00, 1),
('노트북 B', '전자제품', '가성비 노트북', 900000.00, 1),
('스마트폰 X', '전자제품', '최신 스마트폰', 1200000.00, 1),
('스마트폰 Y', '전자제품', '중급 스마트폰', 700000.00, 1),
('무선 이어폰 프로', '액세서리', '노이즈캔슬링 이어폰', 250000.00, 1),
('무선 이어폰 베이직', '액세서리', '기본 무선 이어폰', 80000.00, 1),
('청바지 스키니', '의류', '남성 청바지', 45000.00, 1),
('청바지 와이드', '의류', '여성 청바지', 52000.00, 1),
('후드티 블랙', '의류', '기본 후드티', 35000.00, 1),
('후드티 그레이', '의류', '오버핏 후드티', 38000.00, 1),
('운동화 러닝', '신발', '러닝 전용 운동화', 120000.00, 1),
('운동화 캐주얼', '신발', '데일리 운동화', 85000.00, 1),
('백팩 여행용', '가방', '대용량 백팩', 95000.00, 1),
('백팩 학생용', '가방', '기본 백팩', 55000.00, 1),
('텀블러 보온', '생활용품', '보온 텀블러 500ml', 25000.00, 1),
('텀블러 보냉', '생활용품', '보냉 텀블러 700ml', 28000.00, 1),
('키보드 기계식', '전자제품', '기계식 키보드', 150000.00, 1),
('마우스 게이밍', '전자제품', '게이밍 마우스', 80000.00, 1),
('모니터 27인치', '전자제품', 'QHD 모니터', 450000.00, 1),
('모니터 24인치', '전자제품', 'FHD 모니터', 250000.00, 1);

-- 상품 옵션 (각 상품당 2-4개, 재고 다양하게)
INSERT INTO product_options (product_id, option_name, price_adjustment, stock_quantity, is_sold_out) VALUES
-- 노트북 A (id:1)
(1, '16GB RAM / 512GB SSD', 0.00, 10, 0),
(1, '32GB RAM / 1TB SSD', 300000.00, 5, 0),
-- 노트북 B (id:2)
(2, '8GB RAM / 256GB SSD', 0.00, 15, 0),
(2, '16GB RAM / 512GB SSD', 200000.00, 8, 0),
-- 스마트폰 X (id:3)
(3, '256GB / 블랙', 0.00, 20, 0),
(3, '512GB / 화이트', 150000.00, 12, 0),
(3, '1TB / 그레이', 300000.00, 3, 0),
-- 스마트폰 Y (id:4)
(4, '128GB / 블랙', 0.00, 25, 0),
(4, '256GB / 블루', 100000.00, 15, 0),
-- 무선 이어폰 프로 (id:5)
(5, '화이트', 0.00, 30, 0),
(5, '블랙', 0.00, 28, 0),
-- 무선 이어폰 베이직 (id:6)
(6, '화이트', 0.00, 50, 0),
(6, '블랙', 0.00, 45, 0),
-- 청바지 스키니 (id:7)
(7, '28인치', 0.00, 20, 0),
(7, '30인치', 0.00, 25, 0),
(7, '32인치', 0.00, 18, 0),
-- 청바지 와이드 (id:8)
(8, 'S', 0.00, 15, 0),
(8, 'M', 0.00, 20, 0),
(8, 'L', 0.00, 12, 0),
-- 후드티 블랙 (id:9)
(9, 'M', 0.00, 30, 0),
(9, 'L', 0.00, 35, 0),
(9, 'XL', 0.00, 25, 0),
-- 후드티 그레이 (id:10)
(10, 'M', 0.00, 28, 0),
(10, 'L', 0.00, 32, 0),
(10, 'XL', 0.00, 22, 0),
-- 운동화 러닝 (id:11)
(11, '260mm', 0.00, 15, 0),
(11, '270mm', 0.00, 20, 0),
(11, '280mm', 0.00, 12, 0),
-- 운동화 캐주얼 (id:12)
(12, '260mm', 0.00, 18, 0),
(12, '270mm', 0.00, 22, 0),
-- 백팩 여행용 (id:13)
(13, '블랙', 0.00, 25, 0),
(13, '네이비', 0.00, 20, 0),
-- 백팩 학생용 (id:14)
(14, '블랙', 0.00, 40, 0),
(14, '그레이', 0.00, 35, 0),
-- 텀블러 보온 (id:15)
(15, '화이트', 0.00, 60, 0),
(15, '핑크', 0.00, 55, 0),
-- 텀블러 보냉 (id:16)
(16, '민트', 0.00, 50, 0),
(16, '블루', 0.00, 48, 0),
-- 키보드 기계식 (id:17)
(17, '청축', 0.00, 10, 0),
(17, '갈축', 0.00, 12, 0),
(17, '적축', 0.00, 8, 0),
-- 마우스 게이밍 (id:18)
(18, '블랙', 0.00, 25, 0),
(18, 'RGB', 10000.00, 20, 0),
-- 모니터 27인치 (id:19)
(19, '60Hz', 0.00, 8, 0),
(19, '144Hz', 150000.00, 5, 0),
-- 모니터 24인치 (id:20)
(20, '60Hz', 0.00, 15, 0),
(20, '75Hz', 50000.00, 10, 0);

-- 재고 이력 (각 옵션당 초기 재고 추가 기록)
INSERT INTO stock_histories (product_option_id, amount, adjustment_type, balance, description, updated_by) VALUES
-- 일부 옵션에 대한 재고 추가 이력
(1, 10, 'ADD', 10, '초기 재고', 9),
(2, 5, 'ADD', 5, '초기 재고', 9),
(3, 15, 'ADD', 15, '초기 재고', 9),
(4, 8, 'ADD', 8, '초기 재고', 9),
(5, 20, 'ADD', 20, '초기 재고', 9),
(6, 12, 'ADD', 12, '초기 재고', 9),
(7, 3, 'ADD', 3, '초기 재고', 9),
(8, 25, 'ADD', 25, '초기 재고', 9),
(9, 15, 'ADD', 15, '초기 재고', 9),
(10, 30, 'ADD', 30, '초기 재고', 9),
-- 일부 사용 기록
(5, -2, 'USE', 18, '주문으로 인한 차감', 9),
(8, -3, 'USE', 22, '주문으로 인한 차감', 9),
(10, -5, 'USE', 25, '주문으로 인한 차감', 9);

-- 장바구니 (5명의 사용자, 각 2-3개 상품)
INSERT INTO carts (user_id, product_option_id, quantity) VALUES
(1, 5, 1),  -- user001: 스마트폰 X 256GB
(1, 10, 2), -- user001: 무선 이어폰 프로 블랙 2개
(2, 15, 1), -- user002: 청바지 스키니 28인치
(2, 23, 1), -- user002: 후드티 블랙 L
(3, 29, 1), -- user003: 운동화 러닝 270mm
(3, 35, 1), -- user003: 백팩 여행용 네이비
(4, 39, 2), -- user004: 텀블러 보온 핑크 2개
(5, 43, 1), -- user005: 키보드 기계식 갈축
(5, 46, 1), -- user005: 마우스 게이밍 RGB
(5, 49, 1); -- user005: 모니터 27인치 144Hz

-- 쿠폰 (5개)
INSERT INTO coupons (coupon_name, discount_type, discount_value, min_order_amount, max_issue_count, issued_count, valid_from, valid_to, created_by) VALUES
('신규가입 5천원 할인', 'FIXED', 5000.00, 0.00, 1000, 250, '2025-01-01 00:00:00', '2025-12-31 23:59:59', 9),
('전자제품 10% 할인', 'PERCENTAGE', 10.00, 100000.00, 500, 120, '2025-01-01 00:00:00', '2025-06-30 23:59:59', 9),
('의류 20% 할인', 'PERCENTAGE', 20.00, 50000.00, 300, 80, '2025-02-01 00:00:00', '2025-03-31 23:59:59', 9),
('5만원 이상 5천원 할인', 'FIXED', 5000.00, 50000.00, 2000, 500, '2025-01-01 00:00:00', '2025-12-31 23:59:59', 9),
('VIP 15% 할인', 'PERCENTAGE', 15.00, 200000.00, 100, 30, '2025-01-01 00:00:00', '2025-12-31 23:59:59', 9);

-- 사용자 쿠폰 (다양한 상태: ACTIVE, USED, EXPIRED)
INSERT INTO user_coupons (user_id, coupon_id, status, used_at, order_id) VALUES
(1, 1, 'ACTIVE', NULL, NULL),
(1, 4, 'ACTIVE', NULL, NULL),
(2, 1, 'ACTIVE', NULL, NULL),
(2, 2, 'ACTIVE', NULL, NULL),
(3, 1, 'USED', '2025-01-10 14:30:00', NULL),  -- order_id는 주문 생성 후 업데이트
(3, 5, 'ACTIVE', NULL, NULL),
(4, 3, 'ACTIVE', NULL, NULL),
(4, 4, 'ACTIVE', NULL, NULL),
(5, 2, 'ACTIVE', NULL, NULL),
(5, 4, 'ACTIVE', NULL, NULL),
(6, 1, 'EXPIRED', NULL, NULL),
(7, 1, 'ACTIVE', NULL, NULL),
(8, 4, 'ACTIVE', NULL, NULL);

-- 주문 (다양한 상태: PENDING, PAID, CANCELLED)
INSERT INTO orders (order_number, user_id, total_amount, discount_amount, final_amount, payment_method, coupon_id, order_status, created_at) VALUES
-- PAID 주문 (15개)
('ORD20250110001', 3, 1200000.00, 5000.00, 1095000.00, 'CREDIT', 1, 'PAID', '2025-01-10 10:15:00'),
('ORD20250110002', 1, 1800000.00, 0.00, 1750000.00, 'KAKAO', NULL, 'PAID', '2025-01-10 11:20:00'),
('ORD20250110003', 2, 90000.00, 18000.00, 72000.00, 'CREDIT', 3, 'PAID', '2025-01-10 14:35:00'),
('ORD20250111001', 4, 56000.00, 5000.00, 51000.00, 'CHECK', 4, 'PAID', '2025-01-11 09:10:00'),
('ORD20250111002', 5, 350000.00, 35000.00, 305000.00, 'CREDIT', 2, 'PAID', '2025-01-11 13:45:00'),
('ORD20250111003', 6, 85000.00, 0.00, 85000.00, 'CASH', NULL, 'PAID', '2025-01-11 16:20:00'),
('ORD20250112001', 7, 250000.00, 0.00, 240000.00, 'CREDIT', NULL, 'PAID', '2025-01-12 10:00:00'),
('ORD20250112002', 8, 700000.00, 0.00, 680000.00, 'KAKAO', NULL, 'PAID', '2025-01-12 11:30:00'),
('ORD20250112003', 1, 120000.00, 0.00, 115000.00, 'CREDIT', NULL, 'PAID', '2025-01-12 15:45:00'),
('ORD20250113001', 2, 450000.00, 0.00, 445000.00, 'CREDIT', NULL, 'PAID', '2025-01-13 09:20:00'),
('ORD20250113002', 3, 95000.00, 5000.00, 85000.00, 'CHECK', 4, 'PAID', '2025-01-13 12:10:00'),
('ORD20250113003', 4, 145000.00, 0.00, 140000.00, 'CREDIT', NULL, 'PAID', '2025-01-13 14:30:00'),
('ORD20250113004', 5, 500000.00, 75000.00, 420000.00, 'CREDIT', 5, 'PAID', '2025-01-13 16:50:00'),
('ORD20250113005', 6, 52000.00, 0.00, 52000.00, 'KAKAO', NULL, 'PAID', '2025-01-13 18:00:00'),
('ORD20250113006', 7, 80000.00, 0.00, 78000.00, 'CREDIT', NULL, 'PAID', '2025-01-13 19:15:00'),
-- PENDING 주문 (3개, 15분 타임아웃 전)
('ORD20250113007', 1, 250000.00, 0.00, 250000.00, NULL, NULL, 'PENDING', NOW() - INTERVAL 5 MINUTE),
('ORD20250113008', 2, 150000.00, 5000.00, 145000.00, NULL, 1, 'PENDING', NOW() - INTERVAL 8 MINUTE),
('ORD20250113009', 3, 90000.00, 0.00, 90000.00, NULL, NULL, 'PENDING', NOW() - INTERVAL 3 MINUTE),
-- CANCELLED 주문 (2개)
('ORD20250112004', 4, 700000.00, 0.00, 700000.00, NULL, NULL, 'CANCELLED', '2025-01-12 13:00:00'),
('ORD20250112005', 5, 1500000.00, 0.00, 1500000.00, NULL, NULL, 'CANCELLED', '2025-01-12 17:30:00');

-- 주문 상품 (각 주문당 1-3개 상품, 다양한 배송 상태)
INSERT INTO order_items (order_id, product_id, product_option_id, product_name, option_name, unit_price, quantity, subtotal, item_status) VALUES
-- ORD20250110001 (order_id: 1) - PAID
(1, 3, 5, '스마트폰 X', '256GB / 블랙', 1200000.00, 1, 1200000.00, 'DELIVERED'),
-- ORD20250110002 (order_id: 2) - PAID
(2, 1, 2, '노트북 A', '32GB RAM / 1TB SSD', 1800000.00, 1, 1800000.00, 'SHIPPING'),
-- ORD20250110003 (order_id: 3) - PAID
(3, 7, 15, '청바지 스키니', '28인치', 45000.00, 1, 45000.00, 'DELIVERED'),
(3, 9, 23, '후드티 블랙', 'L', 35000.00, 1, 35000.00, 'DELIVERED'),
(3, 15, 39, '텀블러 보온', '핑크', 25000.00, 1, 25000.00, 'DELIVERED'),
-- ORD20250111001 (order_id: 4) - PAID
(4, 8, 18, '청바지 와이드', 'M', 52000.00, 1, 52000.00, 'DELIVERED'),
-- ORD20250111002 (order_id: 5) - PAID
(5, 17, 43, '키보드 기계식', '갈축', 150000.00, 1, 150000.00, 'SHIPPING'),
(5, 18, 46, '마우스 게이밍', 'RGB', 90000.00, 1, 90000.00, 'SHIPPING'),
(5, 12, 32, '운동화 캐주얼', '270mm', 85000.00, 1, 85000.00, 'PREPARING'),
-- ORD20250111003 (order_id: 6) - PAID
(6, 12, 31, '운동화 캐주얼', '260mm', 85000.00, 1, 85000.00, 'DELIVERED'),
-- ORD20250112001 (order_id: 7) - PAID
(7, 5, 10, '무선 이어폰 프로', '블랙', 250000.00, 1, 250000.00, 'SHIPPING'),
-- ORD20250112002 (order_id: 8) - PAID
(8, 4, 8, '스마트폰 Y', '128GB / 블랙', 700000.00, 1, 700000.00, 'PREPARING'),
-- ORD20250112003 (order_id: 9) - PAID
(9, 11, 29, '운동화 러닝', '270mm', 120000.00, 1, 120000.00, 'DELIVERED'),
-- ORD20250113001 (order_id: 10) - PAID
(10, 19, 47, '모니터 27인치', '60Hz', 450000.00, 1, 450000.00, 'PREPARING'),
-- ORD20250113002 (order_id: 11) - PAID
(11, 13, 35, '백팩 여행용', '네이비', 95000.00, 1, 95000.00, 'DELIVERED'),
-- ORD20250113003 (order_id: 12) - PAID
(12, 10, 26, '후드티 그레이', 'XL', 38000.00, 2, 76000.00, 'SHIPPING'),
(12, 16, 41, '텀블러 보냉', '블루', 28000.00, 2, 56000.00, 'SHIPPING'),
-- ORD20250113004 (order_id: 13) - PAID
(13, 19, 48, '모니터 27인치', '144Hz', 600000.00, 1, 600000.00, 'PREPARING'),
-- ORD20250113005 (order_id: 14) - PAID
(14, 8, 19, '청바지 와이드', 'L', 52000.00, 1, 52000.00, 'DELIVERED'),
-- ORD20250113006 (order_id: 15) - PAID
(15, 6, 13, '무선 이어폰 베이직', '블랙', 80000.00, 1, 80000.00, 'DELIVERED'),
-- ORD20250113007 (order_id: 16) - PENDING
(16, 5, 10, '무선 이어폰 프로', '블랙', 250000.00, 1, 250000.00, 'PREPARING'),
-- ORD20250113008 (order_id: 17) - PENDING
(17, 17, 42, '키보드 기계식', '청축', 150000.00, 1, 150000.00, 'PREPARING'),
-- ORD20250113009 (order_id: 18) - PENDING
(18, 18, 45, '마우스 게이밍', '블랙', 80000.00, 1, 80000.00, 'PREPARING'),
-- ORD20250112004 (order_id: 19) - CANCELLED
(19, 4, 9, '스마트폰 Y', '256GB / 블루', 800000.00, 1, 800000.00, 'CANCELLED'),
-- ORD20250112005 (order_id: 20) - CANCELLED
(20, 1, 2, '노트북 A', '32GB RAM / 1TB SSD', 1800000.00, 1, 1800000.00, 'CANCELLED');

-- 재고 예약 (PENDING 주문에 대한 예약)
INSERT INTO stock_reservations (product_option_id, order_id, reserved_quantity, reservation_status, reserved_at, expires_at) VALUES
(10, 16, 1, 'RESERVED', NOW() - INTERVAL 5 MINUTE, NOW() + INTERVAL 10 MINUTE),
(42, 17, 1, 'RESERVED', NOW() - INTERVAL 8 MINUTE, NOW() + INTERVAL 7 MINUTE),
(45, 18, 1, 'RESERVED', NOW() - INTERVAL 3 MINUTE, NOW() + INTERVAL 12 MINUTE);

-- 포인트 이력 (사용자별 충전 및 사용)
INSERT INTO point_histories (user_id, transaction_type, amount, balance_after, order_id, description) VALUES
-- user001 충전 및 사용
(1, 'CHARGE', 100000.00, 100000.00, NULL, '포인트 충전'),
(1, 'USE', -50000.00, 50000.00, 2, '주문 결제 시 사용'),
-- user002 충전 및 사용
(2, 'CHARGE', 50000.00, 50000.00, NULL, '포인트 충전'),
(2, 'USE', -20000.00, 30000.00, 3, '주문 결제 시 사용'),
-- user003 충전 및 사용
(3, 'CHARGE', 150000.00, 150000.00, NULL, '포인트 충전'),
(3, 'USE', -50000.00, 100000.00, 1, '주문 결제 시 사용'),
(3, 'USE', -5000.00, 95000.00, 11, '주문 결제 시 사용'),
-- user004 충전
(4, 'CHARGE', 30000.00, 30000.00, NULL, '포인트 충전'),
-- user005 충전 및 사용
(5, 'CHARGE', 120000.00, 120000.00, NULL, '포인트 충전'),
(5, 'USE', -45000.00, 75000.00, 5, '주문 결제 시 사용'),
(5, 'USE', -5000.00, 70000.00, 13, '주문 결제 시 사용'),
-- user006 충전
(6, 'CHARGE', 20000.00, 20000.00, NULL, '포인트 충전'),
-- user007 충전 및 사용
(7, 'CHARGE', 80000.00, 80000.00, NULL, '포인트 충전'),
(7, 'USE', -10000.00, 70000.00, 7, '주문 결제 시 사용'),
(7, 'USE', -2000.00, 68000.00, 15, '주문 결제 시 사용'),
-- user008 충전 및 사용
(8, 'CHARGE', 60000.00, 60000.00, NULL, '포인트 충전'),
(8, 'USE', -20000.00, 40000.00, 8, '주문 결제 시 사용');

-- 외부 시스템 연동 로그 (PAID 주문에 대한 연동 로그)
INSERT INTO external_integration_logs (order_id, integration_type, is_success, response_message, retry_count) VALUES
-- 성공 케이스
(1, 'LOGISTICS', 1, '물류 시스템 전송 성공', 0),
(1, 'SALES_MANAGEMENT', 1, '매출 시스템 전송 성공', 0),
(2, 'LOGISTICS', 1, '물류 시스템 전송 성공', 0),
(2, 'SALES_MANAGEMENT', 1, '매출 시스템 전송 성공', 0),
(3, 'LOGISTICS', 1, '물류 시스템 전송 성공', 0),
(4, 'LOGISTICS', 1, '물류 시스템 전송 성공', 0),
(5, 'LOGISTICS', 1, '물류 시스템 전송 성공', 0),
(5, 'SALES_MANAGEMENT', 1, '매출 시스템 전송 성공', 0),
-- 실패 케이스 (재시도 중)
(6, 'SALES_MANAGEMENT', 0, '타임아웃 에러', 2),
(7, 'LOGISTICS', 0, '연결 실패', 1),
(8, 'SALES_MANAGEMENT', 1, '매출 시스템 전송 성공', 1),
(9, 'LOGISTICS', 1, '물류 시스템 전송 성공', 0),
(10, 'LOGISTICS', 1, '물류 시스템 전송 성공', 0),
(11, 'LOGISTICS', 1, '물류 시스템 전송 성공', 0),
(11, 'SALES_MANAGEMENT', 1, '매출 시스템 전송 성공', 0),
(12, 'LOGISTICS', 1, '물류 시스템 전송 성공', 0),
(13, 'LOGISTICS', 0, '재고 확인 실패', 3),
(14, 'LOGISTICS', 1, '물류 시스템 전송 성공', 0),
(15, 'LOGISTICS', 1, '물류 시스템 전송 성공', 0);

-- 인기 상품 통계 (최근 3일, 각 5개씩)
INSERT INTO popular_products (product_id, sales_count, calculation_date, rank) VALUES
-- 2025-01-13 통계
(3, 35, '2025-01-13', 1),
(1, 28, '2025-01-13', 2),
(17, 22, '2025-01-13', 3),
(11, 18, '2025-01-13', 4),
(7, 15, '2025-01-13', 5),
-- 2025-01-12 통계
(3, 32, '2025-01-12', 1),
(11, 25, '2025-01-12', 2),
(1, 23, '2025-01-12', 3),
(9, 20, '2025-01-12', 4),
(5, 18, '2025-01-12', 5),
-- 2025-01-11 통계
(1, 30, '2025-01-11', 1),
(3, 28, '2025-01-11', 2),
(12, 22, '2025-01-11', 3),
(17, 19, '2025-01-11', 4),
(8, 16, '2025-01-11', 5);

-- 사용된 쿠폰에 주문 ID 업데이트
UPDATE user_coupons SET order_id = 1 WHERE user_id = 3 AND coupon_id = 1;
